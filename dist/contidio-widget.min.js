!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(global,factory){"object"==typeof exports&&void 0!==module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.$=factory()}(this,function(){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var win="undefined"!=typeof window?window:{},toArray=function(collection){for(var length=collection.length,result=new Array(length),i=0;i<length;i++)result[i]=collection[i];return result},each=function(collection,callback,thisArg){var length=collection.length;if(void 0!==length&&void 0===collection.nodeType)for(var i=0;i<length;i++)callback.call(thisArg,collection[i],i,collection);else callback.call(thisArg,collection,0,collection);return collection},extend=function(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];return sources.forEach(function(src){for(var prop in src)target[prop]=src[prop]}),target},uniq=function(collection){return collection.filter(function(item,index){return collection.indexOf(item)===index})},isPrototypeSet=!1,reFragment=/^\s*<(\w+|!)[^>]*>/,reSingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,reSimpleSelector=/^[\.#]?[\w-]*$/,$$2=function(selector){var context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,collection=void 0;if(selector){if(selector instanceof Wrapper)return selector;"string"!=typeof selector?collection=selector.nodeType||selector===window?[selector]:selector:reFragment.test(selector)?collection=createFragment(selector):(context="string"==typeof context?document.querySelector(context):context.length?context[0]:context,collection=querySelector(selector,context))}else collection=document.querySelectorAll(null);return wrap(collection)},find=function(selector){var nodes=[];return each(this,function(node){return each(querySelector(selector,node),function(child){-1===nodes.indexOf(child)&&nodes.push(child)})}),$$2(nodes)},matches=function(){var context="undefined"!=typeof Element?Element.prototype:win,_matches=context.matches||context.matchesSelector||context.mozMatchesSelector||context.msMatchesSelector||context.oMatchesSelector||context.webkitMatchesSelector;return function(element,selector){return _matches.call(element,selector)}}(),querySelector=function(selector,context){if(reSimpleSelector.test(selector)){if("#"===selector[0]){var element=(context.getElementById?context:document).getElementById(selector.slice(1));return element?[element]:[]}return"."===selector[0]?context.getElementsByClassName(selector.slice(1)):context.getElementsByTagName(selector)}return context.querySelectorAll(selector)},createFragment=function(html){if(reSingleTag.test(html))return[document.createElement(RegExp.$1)];var elements=[],container=document.createElement("div"),children=container.childNodes;container.innerHTML=html;for(var i=0,l=children.length;i<l;i++)elements.push(children[i]);return elements},wrap=function(collection){return isPrototypeSet||(Wrapper.prototype=$$2.fn,Wrapper.prototype.constructor=Wrapper,isPrototypeSet=!0),new Wrapper(collection)},Wrapper=function(collection){for(var i=0,length=collection.length;i<length;)this[i]=collection[i++];this.length=length},selector=Object.freeze({$:$$2,find:find,matches:matches,Wrapper:Wrapper}),ArrayProto=Array.prototype,every=ArrayProto.every,filter=function(selector,thisArg){var callback="function"==typeof selector?selector:function(element){return matches(element,selector)};return $$2(ArrayProto.filter.call(this,callback,thisArg))},forEach=function(callback,thisArg){return each(this,callback,thisArg)},each$1=forEach,indexOf=ArrayProto.indexOf,map=ArrayProto.map,pop=ArrayProto.pop,push=ArrayProto.push,reduce=ArrayProto.reduce,reduceRight=ArrayProto.reduceRight,reverse=function(){return $$2(toArray(this).reverse())},shift=ArrayProto.shift,some=ArrayProto.some,unshift=ArrayProto.unshift,array=Object.freeze({every:every,filter:filter,forEach:forEach,each:each$1,indexOf:indexOf,map:map,pop:pop,push:push,reduce:reduce,reduceRight:reduceRight,reverse:reverse,shift:shift,some:some,unshift:unshift}),BaseClass=function(api){var BaseClass=function BaseClass(){_classCallCheck(this,BaseClass),Wrapper.call(this,$$2.apply(void 0,arguments))};return extend(BaseClass.prototype,api),BaseClass},isNumeric=function(value){return!isNaN(parseFloat(value))&&isFinite(value)},camelize=function(value){return value.replace(/-([\da-z])/gi,function(matches,letter){return letter.toUpperCase()})},dasherize=function(value){return value.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()},css=function(key,value){var styleProps=void 0,prop=void 0,val=void 0;if("string"==typeof key){if(key=camelize(key),void 0===value){var element=this.nodeType?this:this[0];if(element)return val=element.style[key],isNumeric(val)?parseFloat(val):val;return}styleProps={},styleProps[key]=value}else{styleProps=key;for(prop in styleProps)val=styleProps[prop],delete styleProps[prop],styleProps[camelize(prop)]=val}return each(this,function(element){for(prop in styleProps)styleProps[prop]||0===styleProps[prop]?element.style[prop]=styleProps[prop]:element.style.removeProperty(dasherize(prop))}),this},css$1=Object.freeze({css:css}),forEach$1=Array.prototype.forEach,append=function(element){if(this instanceof Node)if("string"==typeof element)this.insertAdjacentHTML("beforeend",element);else if(element instanceof Node)this.appendChild(element);else{var elements=element instanceof NodeList?toArray(element):element;forEach$1.call(elements,this.appendChild.bind(this))}else _each(this,append,element);return this},prepend=function(element){if(this instanceof Node)if("string"==typeof element)this.insertAdjacentHTML("afterbegin",element);else if(element instanceof Node)this.insertBefore(element,this.firstChild);else{var elements=element instanceof NodeList?toArray(element):element;forEach$1.call(elements.reverse(),prepend.bind(this))}else _each(this,prepend,element);return this},before=function(element){if(this instanceof Node)if("string"==typeof element)this.insertAdjacentHTML("beforebegin",element);else if(element instanceof Node)this.parentNode.insertBefore(element,this);else{var elements=element instanceof NodeList?toArray(element):element;forEach$1.call(elements,before.bind(this))}else _each(this,before,element);return this},after=function(element){if(this instanceof Node)if("string"==typeof element)this.insertAdjacentHTML("afterend",element);else if(element instanceof Node)this.parentNode.insertBefore(element,this.nextSibling);else{var elements=element instanceof NodeList?toArray(element):element;forEach$1.call(elements.reverse(),after.bind(this))}else _each(this,after,element);return this},clone=function(){return $$2(_clone(this))},_clone=function(element){return"string"==typeof element?element:element instanceof Node?element.cloneNode(!0):"length"in element?[].map.call(element,function(el){return el.cloneNode(!0)}):element},_each=function(collection,fn,element){for(var l=collection.length;l--;){var elm=0===l?element:_clone(element);fn.call(collection[l],elm)}},dom=Object.freeze({append:append,prepend:prepend,before:before,after:after,clone:clone,_clone:_clone,_each:_each}),attr=function(key,value){if("string"==typeof key&&void 0===value){var element=this.nodeType?this:this[0];return element?element.getAttribute(key):void 0}return each(this,function(element){if("object"==typeof key)for(var _attr in key)element.setAttribute(_attr,key[_attr]);else element.setAttribute(key,value)})},removeAttr=function(key){return each(this,function(element){return element.removeAttribute(key)})},dom_attr=Object.freeze({attr:attr,removeAttr:removeAttr}),addClass=function(value){return value&&value.length&&each(value.split(" "),_each$1.bind(this,"add")),this},removeClass=function(value){return value&&value.length&&each(value.split(" "),_each$1.bind(this,"remove")),this},toggleClass=function(value,state){if(value&&value.length){var action="boolean"==typeof state?state?"add":"remove":"toggle";each(value.split(" "),_each$1.bind(this,action))}return this},hasClass=function(value){return(this.nodeType?[this]:this).some(function(element){return element.classList.contains(value)})},_each$1=function(fnName,className){return each(this,function(element){return element.classList[fnName](className)})},dom_class=Object.freeze({addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,hasClass:hasClass}),contains=function(container,element){return!(!container||!element||container===element)&&(container.contains?container.contains(element):!!container.compareDocumentPosition&&!(container.compareDocumentPosition(element)&Node.DOCUMENT_POSITION_DISCONNECTED))},dom_contains=Object.freeze({contains:contains}),isSupportsDataSet="undefined"!=typeof document&&"dataset"in document.documentElement,DATAKEYPROP=isSupportsDataSet?"dataset":"__DOMTASTIC_DATA__",data=function(key,value){if("string"==typeof key&&void 0===value){var element=this.nodeType?this:this[0];return element&&DATAKEYPROP in element?element[DATAKEYPROP][key]:void 0}return each(this,function(element){isSupportsDataSet||(element[DATAKEYPROP]=element[DATAKEYPROP]||{}),element[DATAKEYPROP][key]=value})},prop=function(key,value){if("string"==typeof key&&void 0===value){var element=this.nodeType?this:this[0];return element&&element?element[key]:void 0}return each(this,function(element){return element[key]=value})},dom_data=Object.freeze({data:data,prop:prop}),appendTo=function(element){var context="string"==typeof element?$$2(element):element;return append.call(context,this),this},empty=function(){return each(this,function(element){return element.innerHTML=""})},remove=function(){return each(this,function(element){element.parentNode&&element.parentNode.removeChild(element)})},replaceWith=function(){return before.apply(this,arguments).remove()},text=function(value){return void 0===value?this[0].textContent:each(this,function(element){return element.textContent=""+value})},val=function(value){return void 0===value?this[0].value:each(this,function(element){return element.value=value})},dom_extra=Object.freeze({appendTo:appendTo,empty:empty,remove:remove,replaceWith:replaceWith,text:text,val:val}),html=function(fragment){if("string"!=typeof fragment){var element=this.nodeType?this:this[0];return element?element.innerHTML:void 0}return each(this,function(element){return element.innerHTML=fragment})},dom_html=Object.freeze({html:html}),closest=function(){var closest=function(selector,context){var nodes=[];return each(this,function(node){for(;node&&node!==context;){if(matches(node,selector)){nodes.push(node);break}node=node.parentElement}}),$$2(uniq(nodes))};return"undefined"!=typeof Element&&Element.prototype.closest?function(selector,context){if(context)return closest.call(this,selector,context);var nodes=[];return each(this,function(node){var n=node.closest(selector);n&&nodes.push(n)}),$$2(uniq(nodes))}:closest}(),selector_closest=Object.freeze({closest:closest}),on=function(eventNames,selector,handler,useCapture,once){var _this=this;"function"==typeof selector&&(handler=selector,selector=null);var parts=void 0,namespace=void 0,eventListener=void 0;return eventNames.split(" ").forEach(function(eventName){parts=eventName.split("."),eventName=parts[0]||null,namespace=parts[1]||null,eventListener=proxyHandler(handler),each(_this,function(element){if(selector&&(eventListener=delegateHandler.bind(element,selector,eventListener)),once){var listener=eventListener;eventListener=function(event){off.call(element,eventNames,selector,handler,useCapture),listener.call(element,event)}}element.addEventListener(eventName,eventListener,useCapture||!1),getHandlers(element).push({eventName:eventName,handler:handler,eventListener:eventListener,selector:selector,namespace:namespace})})},this),this},off=function(){var eventNames=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",selector=arguments[1],_this2=this,handler=arguments[2],useCapture=arguments[3];"function"==typeof selector&&(handler=selector,selector=null);var parts=void 0,namespace=void 0,handlers=void 0;return eventNames.split(" ").forEach(function(eventName){return parts=eventName.split("."),eventName=parts[0]||null,namespace=parts[1]||null,each(_this2,function(element){handlers=getHandlers(element),each(handlers.filter(function(item){return!(eventName&&item.eventName!==eventName||namespace&&item.namespace!==namespace||handler&&item.handler!==handler||selector&&item.selector!==selector)}),function(item){element.removeEventListener(item.eventName,item.eventListener,useCapture||!1),handlers.splice(handlers.indexOf(item),1)}),eventName||namespace||selector||handler?0===handlers.length&&clearHandlers(element):clearHandlers(element)})},this),this},one=function(eventNames,selector,handler,useCapture){return on.call(this,eventNames,selector,handler,useCapture,1)},eventKeyProp="__domtastic_event__",id=1,handlers={},unusedKeys=[],getHandlers=function(element){element[eventKeyProp]||(element[eventKeyProp]=0===unusedKeys.length?++id:unusedKeys.pop());var key=element[eventKeyProp];return handlers[key]||(handlers[key]=[])},clearHandlers=function(element){var key=element[eventKeyProp];handlers[key]&&(handlers[key]=null,element[eventKeyProp]=null,unusedKeys.push(key))},proxyHandler=function(handler){return function(event){return handler.call(this,augmentEvent(event))}},eventMethods={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},returnTrue=function(){return!0},returnFalse=function(){return!1},augmentEvent=function(event){if(!event.isDefaultPrevented||event.stopImmediatePropagation||event.stopPropagation){for(var methodName in eventMethods)!function(methodName,testMethodName,originalMethod){event[methodName]=function(){return this[testMethodName]=returnTrue,originalMethod&&originalMethod.apply(this,arguments)},event[testMethodName]=returnFalse}(methodName,eventMethods[methodName],event[methodName]);event._preventDefault&&event.preventDefault()}return event},delegateHandler=function(selector,handler,event){var eventTarget=event._target||event.target,currentTarget=closest.call([eventTarget],selector,this)[0];currentTarget&&currentTarget!==this&&(currentTarget!==eventTarget&&event.isPropagationStopped&&event.isPropagationStopped()||handler.call(currentTarget,event))},bind=on,unbind=off,event=Object.freeze({on:on,off:off,one:one,getHandlers:getHandlers,clearHandlers:clearHandlers,proxyHandler:proxyHandler,delegateHandler:delegateHandler,bind:bind,unbind:unbind}),reMouseEvent=/^(?:mouse|pointer|contextmenu)|click/,reKeyEvent=/^key/,trigger=function(type,data){var _ref=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_ref$bubbles=_ref.bubbles,bubbles=void 0===_ref$bubbles||_ref$bubbles,_ref$cancelable=_ref.cancelable,cancelable=void 0===_ref$cancelable||_ref$cancelable,_ref$preventDefault=_ref.preventDefault,preventDefault=void 0!==_ref$preventDefault&&_ref$preventDefault,EventConstructor=getEventConstructor(type),event=new EventConstructor(type,{bubbles:bubbles,cancelable:cancelable,preventDefault:preventDefault,detail:data});return event._preventDefault=preventDefault,each(this,function(element){!bubbles||isEventBubblingInDetachedTree||isAttachedToDocument(element)?dispatchEvent(element,event):triggerForPath(element,type,{bubbles:bubbles,cancelable:cancelable,preventDefault:preventDefault,detail:data})})},getEventConstructor=function(type){return supportsOtherEventConstructors?reMouseEvent.test(type)?MouseEvent:reKeyEvent.test(type)?KeyboardEvent:CustomEvent:CustomEvent},triggerHandler=function(type,data){this[0]&&trigger.call(this[0],type,data,{bubbles:!1,preventDefault:!0})},isAttachedToDocument=function(element){return element===window||element===document||contains(element.ownerDocument.documentElement,element)},triggerForPath=function(element,type){var params=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};params.bubbles=!1;var event=new CustomEvent(type,params);event._target=element;do{dispatchEvent(element,event)}while(element=element.parentNode)},directEventMethods=["blur","focus","select","submit"],dispatchEvent=function(element,event){-1===directEventMethods.indexOf(event.type)||"function"!=typeof element[event.type]||event._preventDefault||event.cancelable?element.dispatchEvent(event):element[event.type]()};!function(){var CustomEvent=function(event){var params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0},customEvent=document.createEvent("CustomEvent");return customEvent.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),customEvent};CustomEvent.prototype=win.CustomEvent&&win.CustomEvent.prototype,win.CustomEvent=CustomEvent}();var isEventBubblingInDetachedTree=function(){var isBubbling=!1,doc=win.document;if(doc){var parent=doc.createElement("div"),child=parent.cloneNode();parent.appendChild(child),parent.addEventListener("e",function(){isBubbling=!0}),child.dispatchEvent(new CustomEvent("e",{bubbles:!0}))}return isBubbling}(),supportsOtherEventConstructors=function(){try{new MouseEvent("click")}catch(e){return!1}return!0}(),event_trigger=Object.freeze({trigger:trigger,triggerHandler:triggerHandler}),ready=function(handler){return/complete|loaded|interactive/.test(document.readyState)&&document.body?handler():document.addEventListener("DOMContentLoaded",handler,!1),this},event_ready=Object.freeze({ready:ready}),previousLib=win.$,noConflict=function(){return win.$=previousLib,this},noconflict=Object.freeze({noConflict:noConflict}),children=function(selector){var nodes=[];return each(this,function(element){element.children&&each(element.children,function(child){(!selector||selector&&matches(child,selector))&&nodes.push(child)})}),$$2(nodes)},contents=function(){var nodes=[];return each(this,function(element){return nodes.push.apply(nodes,toArray(element.childNodes))}),$$2(nodes)},eq=function(index){return slice.call(this,index,index+1)},first=function(){return slice.call(this,0,1)},get=function(index){return this[index]},parent=function(selector){var nodes=[];return each(this,function(element){(!selector||selector&&matches(element.parentNode,selector))&&nodes.push(element.parentNode)}),$$2(nodes)},siblings=function(selector){var nodes=[];return each(this,function(element){return each(element.parentNode.children,function(sibling){sibling!==element&&(!selector||selector&&matches(sibling,selector))&&nodes.push(sibling)})}),$$2(nodes)},slice=function(start,end){return $$2([].slice.apply(this,arguments))},selector_extra=Object.freeze({children:children,contents:contents,eq:eq,first:first,get:get,parent:parent,siblings:siblings,slice:slice}),isFunction=function(obj){return"function"==typeof obj},isArray=Array.isArray,type=Object.freeze({isFunction:isFunction,isArray:isArray}),api={},$$$1={};return void 0!==selector&&($$$1=$$2,$$$1.matches=matches,api.find=find),extend($$$1,dom_contains,noconflict,type),extend(api,array,css$1,dom_attr,dom,dom_class,dom_data,dom_extra,dom_html,event,event_trigger,event_ready,selector_closest,selector_extra),$$$1.fn=api,$$$1.version="0.14.0",$$$1.extend=extend,void 0!==BaseClass&&($$$1.BaseClass=BaseClass($$$1.fn)),$$$1})},{}],2:[function(require,module,exports){!function(root){function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function Promise(fn){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(fn,this)}function handle(self,deferred){for(;3===self._state;)self=self._value;if(0===self._state)return void self._deferreds.push(deferred);self._handled=!0,Promise._immediateFn(function(){var cb=1===self._state?deferred.onFulfilled:deferred.onRejected;if(null===cb)return void(1===self._state?resolve:reject)(deferred.promise,self._value);var ret;try{ret=cb(self._value)}catch(e){return void reject(deferred.promise,e)}resolve(deferred.promise,ret)})}function resolve(self,newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if(newValue instanceof Promise)return self._state=3,self._value=newValue,void finale(self);if("function"==typeof then)return void doResolve(bind(then,newValue),self)}self._state=1,self._value=newValue,finale(self)}catch(e){reject(self,e)}}function reject(self,newValue){self._state=2,self._value=newValue,finale(self)}function finale(self){2===self._state&&0===self._deferreds.length&&Promise._immediateFn(function(){self._handled||Promise._unhandledRejectionFn(self._value)});for(var i=0,len=self._deferreds.length;i<len;i++)handle(self,self._deferreds[i]);self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.promise=promise}function doResolve(fn,self){var done=!1;try{fn(function(value){done||(done=!0,resolve(self,value))},function(reason){done||(done=!0,reject(self,reason))})}catch(ex){if(done)return;done=!0,reject(self,ex)}}var setTimeoutFunc=setTimeout;Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);return handle(this,new Handler(onFulfilled,onRejected,prom)),prom},Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0==--remaining&&resolve(args)}catch(ex){reject(ex)}}if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise(function(resolve){resolve(value)})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++)values[i].then(resolve,reject)})},Promise._immediateFn="function"==typeof setImmediate&&function(fn){setImmediate(fn)}||function(fn){setTimeoutFunc(fn,0)},Promise._unhandledRejectionFn=function(err){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",err)},Promise._setImmediateFn=function(fn){Promise._immediateFn=fn},Promise._setUnhandledRejectionFn=function(fn){Promise._unhandledRejectionFn=fn},void 0!==module&&module.exports?module.exports=Promise:root.Promise||(root.Promise=Promise)}(this)},{}],3:[function(require,module,exports){!function(self){"use strict";function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:void 0===value,value:value}}};return support.iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach(function(value,name){this.append(name,value)},this):Array.isArray(headers)?headers.forEach(function(header){this.append(header[0],header[1])},this):headers&&Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=!0}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsArrayBuffer(blob),promise}function readBlobAsText(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsText(blob),promise}function readArrayBufferAsText(buf){for(var view=new Uint8Array(buf),chars=new Array(view.length),i=0;i<view.length;i++)chars[i]=String.fromCharCode(view[i]);return chars.join("")}function bufferClone(buf){if(buf.slice)return buf.slice(0);var view=new Uint8Array(buf.byteLength);return view.set(new Uint8Array(buf)),view.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(body){if(this._bodyInit=body,body)if("string"==typeof body)this._bodyText=body;else if(support.blob&&Blob.prototype.isPrototypeOf(body))this._bodyBlob=body;else if(support.formData&&FormData.prototype.isPrototypeOf(body))this._bodyFormData=body;else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body))this._bodyText=body.toString();else if(support.arrayBuffer&&support.blob&&isDataView(body))this._bodyArrayBuffer=bufferClone(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!support.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(body)&&!isArrayBufferView(body))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=bufferClone(body)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support.blob&&(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(input instanceof Request){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=options.credentials||this.credentials||"omit",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=normalizeMethod(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;return body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}}),form}function parseHeaders(rawHeaders){var headers=new Headers;return rawHeaders.split(/\r?\n/).forEach(function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}}),headers}function Response(bodyInit,options){options||(options={}),this.type="default",this.status="status"in options?options.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in options?options.statusText:"OK",this.headers=new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}if(!self.fetch){var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(support.arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isDataView=function(obj){return obj&&DataView.prototype.isPrototypeOf(obj)},isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1};Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+","+value:value},Headers.prototype.delete=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){return name=normalizeName(name),this.has(name)?this.map[name]:null},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)},Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map)this.map.hasOwnProperty(name)&&callback.call(thisArg,this.map[name],name,this)},Headers.prototype.keys=function(){var items=[];return this.forEach(function(value,name){items.push(name)}),iteratorFor(items)},Headers.prototype.values=function(){var items=[];return this.forEach(function(value){items.push(value)}),iteratorFor(items)},Headers.prototype.entries=function(){var items=[];return this.forEach(function(value,name){items.push([name,value])}),iteratorFor(items)},support.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})},self.Headers=Headers,self.Request=Request,self.Response=Response,self.fetch=function(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init),xhr=new XMLHttpRequest;xhr.onload=function(){var options={
status:xhr.status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders()||"")};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.ontimeout=function(){reject(new TypeError("Network request failed"))},xhr.open(request.method,request.url,!0),"include"===request.credentials&&(xhr.withCredentials=!0),"responseType"in xhr&&support.blob&&(xhr.responseType="blob"),request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)}),xhr.send(void 0===request._bodyInit?null:request._bodyInit)})},self.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],4:[function(require,module,exports){function ContidioWidget(){var defaultOptions={container:".contidio-widget",itemClass:"contidio-item",translations:{detailLink:"more",licenseButton:"License on Contidio",endOfExcerpt:"(The preview of the story ends here. Please license this asset to download the full story)",fetchError:"An error occurred while trying to fetch the required data.",noContainerError:"The container defined for the contidio widget was not found",noRendererError:"No ContidioRenderer found"},hideDetailButton:!1,onListClick:null,onListClickTarget:"_blank",beforeRender:null,afterRender:null,url:"https://mdidx.contidio.com/api/v1/searchEntities/anonymous/?flags=145340470544642&startIndex=0&count=48&orderBy=2&orderDirection=2&recursive=1&types=1,2,3"},Promise=require("promise-polyfill");require("whatwg-fetch"),window.Promise||(window.Promise=Promise);var $="undefined"==typeof jQuery?require("domtastic"):jQuery;this.items=[],this.stringNullOrEmpty=function(str){return!str||/^\s*$/.test(str)},this.mergeOptions=function(obj1,obj2){var obj3={};for(var attrname in obj1)obj3[attrname]=obj1[attrname];for(var attrname in obj2)obj3[attrname]=obj2[attrname];return obj3},this.init=function(){return this.options=this.mergeOptions(defaultOptions,contidioOptions||{}),this.options.translations=this.mergeOptions(defaultOptions.translations,contidioOptions?contidioOptions.translations:{}),"undefined"==typeof ContidioRenderer?this.throwError(this.options.translations.noRendererError):(this.renderer=new ContidioRenderer(this,$),0===$(this.options.container).length?this.throwError(this.options.translations.noContainerError):void(this.stringNullOrEmpty(this.options.url)||this.fetchUrl(this.options.url)))},this.throwError=function(message){console.error(message),this.renderer&&this.options.container&&($(options.container)[0].innerHTML="",$(options.container).append(renderer.renderError(error)))},this.fetchUrl=function(url){this.items=[];var options=this.options,renderer=this.renderer,that=this;renderer.renderLoader&&$(options.container).append(renderer.renderLoader()),fetch(url,{headers:{"x-contidio-sdk":"1.0-JS"}}).then(function(response){return response.json()}).then(function(json){that.extractItems(json),"function"==typeof options.beforeRender&&options.beforeRender(that.items),$(options.container)[0].innerHTML="",json.entity?$(options.container).append(renderer.renderListView(that.items)):$(options.container).append(renderer.renderDetailView(that.items[0])),"function"==typeof options.afterRender&&options.afterRender(that.items),renderer.resize&&(renderer.resize(),that.addEvent(window,"resize",function(){renderer.resize()}))}).catch(function(error){that.throwError(error)})},this.extractItems=function(json){var that=this;json.entity?json.entity.forEach(function(entity){that.items.push(that.getItemData(entity,!1))}):that.items.push(that.getItemData(json,!0))},this.getItemData=function(entity,isDetail){var item={uuid:entity.uuid,name:entity.name?entity.name:entity.uuid,description:entity.description||!1,editorial:entity.editorial||!1,type:this.getType(entity.type),url:"https://www.contidio.com/"+this.getType(entity.type)+"/"+entity.uuid};void 0!==entity.isUnlocked&&!1===entity.isUnlocked&&(item.restricted=!0),entity.workingSetBinaryType&&(item.binaryType=this.getBinaryType(entity.workingSetBinaryType)),entity.resolvedInheritedData&&entity.resolvedInheritedData.tags&&entity.resolvedInheritedData.tags.tag&&entity.resolvedInheritedData.tags.tag.length&&(item.tags=entity.resolvedInheritedData.tags.tag),entity.previewBinarySet&&entity.previewBinarySet[0].author&&(item.author=entity.previewBinarySet[0].author);var timeStampForDate=entity.lastUpdatedTimestamp||entity.createdTimestamp,date=new Date(timeStampForDate);item.date=(date.getDate()<10?"0":0)+date.getDate()+"."+(date.getMonth()<9?"0":0)+(date.getMonth()+1)+"."+date.getFullYear();var width=isDetail?875:350,previewBinaryPurpose=this.CONSTANTS.BinaryPurpose.ASSET_LIST_PREVIEW;if(isDetail){if(previewBinaryPurpose="folder"===item.type?this.CONSTANTS.BinaryPurpose.FOLDER_LIST_PREVIEW:this.CONSTANTS.BinaryPurpose.ASSET_PREVIEW,item.binaryType)switch(item.binaryType){case"image":previewBinaryPurpose=this.CONSTANTS.BinaryPurpose.ASSET_PREVIEW;break;case"audio":previewBinaryPurpose=this.CONSTANTS.BinaryPurpose.ASSET_COVER,item.audioSrc=this.getBinarySrc(entity,this.CONSTANTS.BinaryPurpose.ASSET_ADVANCED_PREVIEW,-1);break;case"video":previewBinaryPurpose=this.CONSTANTS.BinaryPurpose.ASSET_ADVANCED_PREVIEW_IMAGE,item.videoSrc=this.getBinarySrc(entity,this.CONSTANTS.BinaryPurpose.ASSET_ADVANCED_PREVIEW,width);break;case"document":if(entity.asset&&entity.asset.type&&2===entity.asset.type){item.isStory=!0,item.coverImage=this.getBinarySrc(entity,this.CONSTANTS.BinaryPurpose.ASSET_BACKGROUND,1920),item.coverImage.indexOf("placeholder")>-1&&(item.coverImage=!1);var htmlSrc=this.getBinarySrc(entity,this.CONSTANTS.BinaryPurpose.ASSET_BASE,-2);previewBinaryPurpose=this.CONSTANTS.BinaryPurpose.ASSET_HEADER,width=875,item.html=fetch(htmlSrc,{headers:{"x-contidio-sdk":"1.0-JS"}}).then(function(response){return response.text()}).then(function(text){return text})}else item.isStory=!1,previewBinaryPurpose=this.CONSTANTS.BinaryPurpose.ASSET_ADVANCED_LIST_PREVIEW_IMAGE,item.pdfSrc=this.getBinarySrc(entity,this.CONSTANTS.BinaryPurpose.ASSET_BASE,-2),width=700}}else{switch(previewBinaryPurpose="folder"===item.type?this.CONSTANTS.BinaryPurpose.FOLDER_LIST_PREVIEW:this.CONSTANTS.BinaryPurpose.ASSET_LIST_PREVIEW,item.type){case"brand":previewBinaryPurpose=this.CONSTANTS.BinaryPurpose.BRAND_LOGO;break;case"folder":previewBinaryPurpose=this.CONSTANTS.BinaryPurpose.FOLDER_LIST_PREVIEW}if(item.binaryType)switch(item.binaryType){case"video":previewBinaryPurpose=this.CONSTANTS.BinaryPurpose.ASSET_ADVANCED_LIST_PREVIEW_IMAGE;break;case"document":item.isStory=entity.asset&&entity.asset.type&&2===entity.asset.type,previewBinaryPurpose=entity.asset&&2===entity.asset.type?this.CONSTANTS.BinaryPurpose.ASSET_LIST_PREVIEW:this.CONSTANTS.BinaryPurpose.ASSET_ADVANCED_LIST_PREVIEW_IMAGE}}return item.previewImage=this.getBinarySrc(entity,previewBinaryPurpose,width),item},this.getType=function(type){switch(type){case 0:return"brand";case 1:return"folder";case 2:return"asset";default:return"undefined"}},this.getBinaryType=function(binaryType){switch(binaryType){case 1:return"image";case 2:return"audio";case 3:return"video";case 4:return"document";default:return"undefined"}},this.getBinarySrc=function(entity,binaryPurpose,width){var indexToUse=-1;if(!entity.previewBinarySet||0===entity.previewBinarySet.length)return this.getPlaceholderSrc(entity);for(var bP=binaryPurpose||this.CONSTANTS.BinaryPurpose.ASSET_LIST_PREVIEW,w=width||560,i=0;i<entity.previewBinarySet[0].calculatedBinary.length;i++)entity.previewBinarySet[0].calculatedBinary[i].binaryPurpose===bP&&entity.previewBinarySet[0].calculatedBinary[i].outputId>=w&&(indexToUse=i);return indexToUse>-1?entity.previewBinarySet[0].calculatedBinary[indexToUse].downloadLink:this.getPlaceholderSrc(entity)},this.getPlaceholderSrc=function(entity){var type=this.getType(entity.type),binaryType=this.getBinaryType(entity.workingSetBinaryType);return"folder"===type?"https://www.contidio.com/assets/placeholders/folder_gray.png":"document"===binaryType?"https://www.contidio.com/assets/placeholders/document_landscape.png":"https://www.contidio.com/assets/placeholders/"+binaryType+"_gray.png"},this.addEvent=function(object,type,callback){null!==object&&void 0!==object&&(object.addEventListener?object.addEventListener(type,callback,!1):object.attachEvent?object.attachEvent("on"+type,callback):object["on"+type]=callback)},this.CONSTANTS={EXCERPT_END_IDENTIFIER:"--SNIP--",BinaryPurpose:{BRAND_LOGO:100,BRAND_ASSET:150,BRAND_BACKGROUND:200,BRAND_BACKGROUND_TALL:250,BRAND_WATERMARK:300,FOLDER_ASSET:1e3,FOLDER_BACKGROUND:1100,FOLDER_BACKGROUND_TALL:1150,FOLDER_LIST_PREVIEW:1200,JOBS_ASSET:1500,JOBS_BACKGROUND:1600,JOBS_BACKGROUND_TALL:1650,JOBS_LIST_PREVIEW:1700,JOB_ASSET:2e3,JOB_BACKGROUND:2100,JOB_BACKGROUND_TALL:2150,JOB_LIST_PREVIEW:2200,PROJECT_ASSET:3e3,PROJECT_BACKGROUND:3100,PROJECT_BACKGROUND_TALL:3150,PROJECT_LIST_PREVIEW:3200,ASSET_ASSET:1e4,ASSET_BASE:10001,ASSET_LIST_PREVIEW:19e3,ASSET_PREVIEW:19001,ASSET_ADVANCED_LIST_PREVIEW_IMAGE:19002,ASSET_ADVANCED_LIST_PREVIEW:19003,ASSET_ADVANCED_PREVIEW_IMAGE:19004,ASSET_ADVANCED_PREVIEW:19005,ASSET_COVER:19006,ASSET_BACKGROUND_ASSET:19007,ASSET_BACKGROUND:19008,ASSET_BACKGROUND_TALL:19009,ASSET_HEADER:19010,ASSET_SPLITVIEW_LIST_PREVIEW:19011}}}(new ContidioWidget).init()},{domtastic:1,"promise-polyfill":2,"whatwg-fetch":3}]},{},[4]);
